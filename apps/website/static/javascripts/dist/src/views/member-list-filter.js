define(["jquery","underscore","backbone","dist/src/collections/members"],function($,_,Backbone,MemberCollection){var MemberListFilterView=Backbone.View.extend({el:".member-list-container",members:null,ascending:!0,filters:{},initialize:function(){console.log("MemberListFilterView initialize");var e=$("#organization-id").val();this.members=new MemberCollection({organization_id:e}),this.members.fetch()},events:{"change .filter-select":"handleFilter","click input[type=radio]":"changeOrder"},changeOrder:function(e){this.ascending="asc"===$(e.currentTarget).val()?!0:!1,this.render()},handleFilter:function(e){e.preventDefault(),this.filters.Sort=$("#sort-filter").val(),this.filters["Participant Type"]=$("#participant-type-filter").val(),this.filters["Graduation Year From"]=$("#graduation-year-from-filter").val(),this.filters["Graduation Year To"]=$("#graduation-year-to-filter").val(),this.filters.School=$("#school-filter").val(),this.filters["Current State"]=$("#state-filter").val(),this.filters.Industry=$("#industry-filter").val(),this.filters.Gender=$("#gender-filter").val(),this.render()},render:function(){var _this=this,results=this.members.filter(function(e){if(_this.filters["Participant Type"]&&e.get("fields").participant_type!=_this.filters["Participant Type"])return!1;if(_this.filters.Gender&&e.get("fields").gender!=_this.filters.Gender)return!1;if(_this.filters["Graduation Year From"]&&_this.filters["Graduation Year To"]){var t=parseInt(e.get("fields").graduation_year),r=parseInt(_this.filters["Graduation Year From"]),i=parseInt(_this.filters["Graduation Year To"]);if(isNaN(t))return!1;if(r>t||t>i)return!1}return _this.filters.School&&e.get("fields").school!=_this.filters.School?!1:_this.filters["Current State"]&&e.get("fields").current_state!=_this.filters["Current State"]?!1:_this.filters.Industry&&e.get("fields").industry!=_this.filters.Industry?!1:!0});if(this.filters.Sort)var results=_.sortBy(results,function(member){var func="member.get('fields')."+_this.filters.Sort;return eval(func)});this.filters.Sort&&!this.ascending&&results.reverse(),("firstname"===this.filters.Sort||"lastname"===this.filters.Sort)&&results.reverse();var content=_.template($("#member-list-template").html(),{Members:results});$("#member-list-members").html(content)}});return MemberListFilterView});